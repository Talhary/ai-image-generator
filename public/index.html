<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Image Generator & Upscaler</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200">
    <div class="container mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold text-center mb-6">AI Image Generator & Upscaler</h1>
    
        <!-- Image Generation Form -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8 dark:bg-gray-800">
          <h2 class="text-2xl font-semibold mb-4">Generate Image</h2>
          <form id="generateForm" class="space-y-4">
            <div>
              <label for="prompt" class="block font-medium">Enter Prompt:</label>
              <input type="text" id="prompt" name="prompt" 
                class="w-full border border-gray-400 rounded-lg shadow-sm p-2 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300" 
                required>
            </div>
            <button type="submit" id="generateButton" 
              class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 flex items-center">
              <span>Generate Image</span>
              <svg id="loadingSpinnerGen" class="animate-spin h-5 w-5 ml-2 text-white hidden" 
                xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v8H4z"></path>
              </svg>
            </button>
          </form>
          <div id="generatedImage" class="mt-4 hidden">
            <h3 class="text-xl font-semibold mb-2">Generated Image:</h3>
            <img id="imageResult" src="" alt="Generated Image" class="w-full rounded-lg mb-4">
            <div class="flex space-x-2">
              <a id="downloadGeneratedImage" href="#" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600" download>Download Image</a>
              <a id="openGeneratedImage" href="#" target="_blank" class="bg-gray-300 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-400">Open in New Tab</a>
            </div>
            <button id="upscaleGeneratedButton" 
              class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 flex items-center mt-4">
              <span>Upscale Generated Image</span>
              <svg id="loadingSpinnerUpscaleGen" class="animate-spin h-5 w-5 ml-2 text-white hidden" 
                xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v8H4z"></path>
              </svg>
            </button>
          </div>
        </div>
    
        <!-- Image Upscaling Form -->
        <div class="bg-white rounded-lg shadow-lg p-6 dark:bg-gray-800">
          <h2 class="text-2xl font-semibold mb-4">Upscale Image</h2>
          <form id="upscaleForm" class="space-y-4">
            <div>
              <label for="imageUrl" class="block font-medium">Enter Image URL:</label>
              <input type="text" id="imageUrl" name="url" 
                class="w-full border border-gray-400 rounded-lg shadow-sm p-2 focus:outline-none focus:border-green-500 focus:ring-1 focus:ring-green-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300" 
                required>
            </div>
            <button type="submit" id="upscaleButton" 
              class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 flex items-center">
              <span>Upscale Image</span>
              <svg id="loadingSpinnerUpscale" class="animate-spin h-5 w-5 ml-2 text-white hidden" 
                xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v8H4z"></path>
              </svg>
            </button>
          </form>
          <div id="upscaledImage" class="mt-4 hidden">
            <h3 class="text-xl font-semibold mb-2">Upscaled Image:</h3>
            <img id="upscaleResult" src="" alt="Upscaled Image" class="w-full rounded-lg mb-4">
            <div class="flex space-x-2">
              <a id="downloadUpscaledImage" href="#" class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600" download>Download Image</a>
              <a id="openUpscaledImage" href="#" target="_blank" class="bg-gray-300 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-400">Open in New Tab</a>
            </div>
          </div>
        </div>

        <!-- Display Images Section -->
        <div class="mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="imagesDisplay">
          <!-- Images will be displayed here -->
        </div>
      </div>

  <script>
    // Disable button and show spinner
    function toggleButtonState(buttonId, spinnerId, disable) {
      const button = document.getElementById(buttonId);
      const spinner = document.getElementById(spinnerId);
      if (disable) {
        button.disabled = true;
        spinner.classList.remove('hidden');
      } else {
        button.disabled = false;
        spinner.classList.add('hidden');
      }
    }

    // Store image URLs in local storage
    function saveImageUrl(url) {
      const images = JSON.parse(localStorage.getItem('imageUrls')) || [];
      images.push(url);
      localStorage.setItem('imageUrls', JSON.stringify(images));
      displayImages();
    }

    // Remove an image URL from local storage
    function removeImageUrl(url) {
      const images = JSON.parse(localStorage.getItem('imageUrls')) || [];
      const updatedImages = images.filter(imageUrl => imageUrl !== url);
      localStorage.setItem('imageUrls', JSON.stringify(updatedImages));
      displayImages();
    }

    // Display images from local storage
    function displayImages() {
      const images = JSON.parse(localStorage.getItem('imageUrls')) || [];
      const imagesDisplay = document.getElementById('imagesDisplay');
      imagesDisplay.innerHTML = ''; // Clear previous images

      images.forEach(url => {
        const imgDiv = document.createElement('div');
        imgDiv.className = 'bg-white rounded-lg shadow-lg overflow-hidden dark:bg-gray-800';
        imgDiv.innerHTML = `
          <img src="${url}" alt="Generated Image" class="w-full">
          <div class="p-2 flex justify-between items-center">
            <div class="flex space-x-2">
              <a href="${url}" class="bg-blue-500 text-white px-4 py-2   my-3  rounded-lg hover:bg-blue-600" download>Download</a>
              <a href="${url}" target="_blank" class="bg-gray-300 text-gray-800 px-4 py-2 rounded-lg my-3 hover:bg-gray-400">Open</a>
            </div>
            <button class="bg-red-500 text-white px-2 py-1 rounded-lg hover:bg-red-600" onclick="removeImageUrl('${url}')">Delete</button>
          </div>
        `;
        imagesDisplay.appendChild(imgDiv);
      });
    }

    // Handle Image Generation
    document.getElementById('generateForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const prompt = document.getElementById('prompt').value;
      toggleButtonState('generateButton', 'loadingSpinnerGen', true);
      // Simulate image generation (replace this with your actual API call)
      setTimeout(() => {
        const generatedUrl = 'https://via.placeholder.com/300.png?text=' + encodeURIComponent(prompt);
        document.getElementById('imageResult').src = generatedUrl;
        document.getElementById('generatedImage').classList.remove('hidden');
        document.getElementById('downloadGeneratedImage').href = generatedUrl;
        document.getElementById('openGeneratedImage').href = generatedUrl;
        saveImageUrl(generatedUrl);
        toggleButtonState('generateButton', 'loadingSpinnerGen', false);
      }, 2000);
    });

    // Handle Image Upscaling
    document.getElementById('upscaleForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const imageUrl = document.getElementById('imageUrl').value;
      toggleButtonState('upscaleButton', 'loadingSpinnerUpscale', true);
      // Simulate image upscaling (replace this with your actual API call)
      setTimeout(() => {
        const upscaledUrl = imageUrl; // Replace with actual upscaled image URL
        document.getElementById('upscaleResult').src = upscaledUrl;
        document.getElementById('upscaledImage').classList.remove('hidden');
        document.getElementById('downloadUpscaledImage').href = upscaledUrl;
        document.getElementById('openUpscaledImage').href = upscaledUrl;
        toggleButtonState('upscaleButton', 'loadingSpinnerUpscale', false);
      }, 2000);
    });

    // Load images on page load
    window.onload = displayImages;
  </script>
</body>
</html>
